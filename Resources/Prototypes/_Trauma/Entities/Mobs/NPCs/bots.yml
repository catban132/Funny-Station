- type: entity
  parent: MobSiliconBase
  id: MobButtBot
  name: butt bot
  description: A robot which farts
  components:
  - type: Sprite
    sprite: _Trauma/Mobs/Silicon/Bots/buttbot.rsi
    state: buttbot
  - type: AutoEmote
    emotes:
    - Fart
  - type: HTN
    rootTask:
      task: RuminantCompound
  - type: Destructible
    thresholds:
    - trigger: !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: Construction
    graph: ButtBot
    node: bot
  - type: Fart
  - type: EmoteOnDamage
    emotes:
    - Fart

- type: entity
  parent: MobButtBot
  id: MobButtBotCyber
  name: cyber butt bot
  components:
  - type: Sprite
    state: cyberbuttbot
  #- type: Construction # TODO: add CyberButt actual butt item
  #  graph: CyberButtBot
  #  node: bot

- type: entity
  parent: MobSiliconBase
  id: MobDuckBot
  name: duck bot
  description: An amusing duck
  components:
  - type: Sprite
    sprite: _Trauma/Mobs/Silicon/Bots/duckbot.rsi
    state: duckbot
  - type: HTN
    rootTask:
      task: RuminantCompound
  - type: Destructible
    thresholds:
    - trigger: !type:DamageTrigger
        damage: 30
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      30: Dead
  - type: Construction
    graph: DuckBot
    node: bot
  - type: EggLayer
    eggSpawn:
    - id: FoodEgg
  - type: SpamEmitSound
    minInterval: 15
    maxInterval: 30
    sound:
      collection: AmusingDuckCollection
  - type: InteractionPopup
    successChance: 0.5
    interactSuccessString: petting-success-duckbot
    interactFailureString: petting-failure-duckbot
    interactSuccessSound:
      path: /Audio/Ambience/Objects/periodic_beep.ogg

- type: entity
  id: BoogieBotSpawner
  name: boogie bot
  description: Get down on it!
  components:
  - type: Sprite
    sprite: _Trauma/Mobs/Silicon/Bots/boogiebot.rsi
    state: icon
  - type: RandomSpawner
    offset: 0
    prototypes:
    - MobBoogieBotD1
    - MobBoogieBotD2
    - MobBoogieBotD3
  - type: Construction
    graph: BoogieBot
    node: bot

- type: entity
  parent: MobSiliconBase
  id: BaseMobBoogieBot
  name: boogie bot
  description: Get down on it!
  categories: [ HideSpawnMenu ]
  abstract: true
  components:
  - type: Sprite
    sprite: _Trauma/Mobs/Silicon/Bots/boogiebot.rsi
    state: icon
  - type: HTN
    rootTask:
      task: RuminantCompound
  - type: Destructible
    thresholds:
    - trigger: !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: DamageStateVisuals
    states:
      Dead:
        Base: dead
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      50: Dead
  - type: Construction
    graph: BoogieBot
    node: bot
  - type: InteractionPopup
    successChance: 0.9
    interactSuccessString: petting-success-boogiebot
    interactFailureString: petting-failure-boogiebot
    interactSuccessSpawn: EffectHearts
    interactSuccessSound:
      path: /Audio/Ambience/Objects/periodic_beep.ogg

- type: entity
  parent: BaseMobBoogieBot
  id: MobBoogieBotD1
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: boogie-d1

- type: entity
  parent: BaseMobBoogieBot
  id: MobBoogieBotD2
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: boogie-d2

- type: entity
  parent: BaseMobBoogieBot
  id: MobBoogieBotD3
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: boogie-d3

- type: entity
  parent: [MobSiliconBase, MobCombat]
  id: MobED209
  name: ED-209
  description: Officer Beepsky's bigger brother
  components:
  - type: Sprite
    sprite: _Trauma/Mobs/Silicon/Bots/ed209.rsi
    state: ed209
  - type: MovementSpeedModifier
    baseWalkSpeed: 2.2
    baseSprintSpeed: 2.2
  - type: Destructible
    thresholds:
    - trigger: !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Gun
    fireRate: 5
    useKey: false
    selectedMode: FullAuto
    availableModes:
    - FullAuto
    soundGunshot: /Audio/Weapons/Guns/Gunshots/batrifle.ogg
  - type: BallisticAmmoProvider
    proto: CartridgeRifle
    capacity: 125
  - type: HTN
    rootTask:
      task: ED209Compound
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
  - type: NpcFactionMember
    factions:
    - NanoTrasen
  - type: Construction
    graph: ED209
    node: ed209
  - type: ChangeFactionOnEmag
    faction: Syndicate
  - type: ChangeHtnOnEmag
    task: !type:HTNCompoundTask
      task: ED209EmagedCompound

- type: entity
  id: ED209Endoskeleton
  name: ED-209 endoskeleton
  description: A frame that the ED-209 is built on.
  components:
  - type: Clickable
  - type: InteractionOutline
  - type: Physics
    bodyType: Dynamic
    fixedRotation: false
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.25,-0.25,0.25,0.25"
        density: 100
        mask:
        - MobMask
        layer:
        - MobLayer
        restitution: 0.3
        friction: 0.2
  - type: Sprite
    noRot: true
    drawdepth: Items
    sprite: _Trauma/Mobs/Silicon/Bots/ed209.rsi
    state: ed209_frame
  - type: Appearance
  - type: ItemMapper
    sprite: _Trauma/Mobs/Silicon/Bots/ed209.rsi
    mapLayers:
      edleg_L:
        whitelist:
          tags:
          - Ed209LegL
      edleg_R:
        whitelist:
          tags:
          - Ed209LegR
      ed209_prox:
        whitelist:
          tags:
          - Ed209Hat
      ed209_shell:
        whitelist:
          tags:
          - Ed209Shell
  - type: ContainerContainer
    containers:
      part-container: !type:Container
  - type: PartAssembly
    parts:
      generic:
      - Ed209LegL
      - Ed209LegR
      - Ed209Hat
      - Ed209Shell
  - type: Construction
    graph: ED209
    node: start
    defaultTarget: ed209
    containers:
    - part-container
  - type: Pullable
  - type: GuideHelp
    guides:
    - Robotics
    - Cyborgs

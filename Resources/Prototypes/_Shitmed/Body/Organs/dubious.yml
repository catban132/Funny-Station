# SPDX-License-Identifier: AGPL-3.0-or-later

# Abductor glands
# chicken is best

- type: entity
  abstract: true
  id: OrganDubiousBase
  parent: [ OrganBaseHeart, BaseMajorContraband ]
  name: mysterious gland
  description: Suspicious alien gland, replaces the heart.
  components:
  - type: Sprite
    sprite: _Shitmed/Mobs/Species/Misc/Dubious/organs.rsi
    layers:
    - gland
  - type: AbductorOrgan

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousHealth
  suffix: Healing
  components:
  - type: Sprite
    layers:
    - health
  - type: OrganComponents
    onAdd:
    - type: PassiveDamage
      allowedStates:
      - Alive
      - Critical
      damageCap: 150
      damage:
        groups:
          Brute: -0.14
          Burn: -0.14
          Airloss: -0.14
          Toxin: -0.14
          Genetic: -0.14

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousAA
  suffix: All Access
  components:
  - type: Sprite
    layers:
    - state: emp
  - type: OrganComponents
    onAdd:
    - type: Access
      enabled: true
      groups:
      - AllAccess

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousShock
  suffix: Shocking
  components:
  - type: Sprite
    layers:
    - state: emp
  - type: OrganComponents
    onAdd:
    - type: Insulated
    - type: LightningArcShooter
      arcDepth: 1
      maxLightningArc: 3
      shootMinInterval: 90
      shootMaxInterval: 300
      shootRange: 5
      lightningPrototype: Lightning

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousInvisible
  suffix: Invisible
  components:
  - type: Sprite
    layers:
    - state: species
  - type: OrganComponents
    onAdd:
    - type: Stealth
      enabledOnDeath: false
      maxVisibility: 1.2
    - type: StealthOnMove
      passiveVisibilityRate: -0.25
      movementVisibilityRate: 0.25

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousGoliath
  suffix: Goliath
  components:
  - type: Sprite
    layers:
    - state: species
  - type: OrganComponents
    onAdd:
    - type: GoliathTentacle

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousSpaceAdaptation
  suffix: Space
  components:
  - type: Sprite
    layers:
    - state: species
  - type: OrganComponents
    onAdd:
    - type: PressureImmunity
    - type: BreathingImmunity

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousArtifact
  suffix: Artifact
  components:
  - type: Sprite
    layers:
    - state: mindshock
  - type: OrganComponents
    onAdd:
    - type: XenoArtifact
    - type: RandomStatusActivation
      statusEffects:
        ActivateArtifactEffect: ActivateArtifactEffect

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousScrambleDna
  suffix: DNA Scrambler
  components:
  - type: Sprite
    layers:
    - state: species
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation # TODO SHITMED: refactor this dogshit to be random trigger on the organ, relay to the body
      statusEffects:
        ScrambleDnaEffect: ScrambleDnaEffect

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousScrambleLocation
  suffix: Teleport
  components:
  - type: Sprite
    layers:
    - state: vent
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      statusEffects:
        ScrambleLocationEffect: ScrambleLocationEffect

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousSpiderEggs
  suffix: Spiders
  components:
  - type: Sprite
    layers:
    - state: spider
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      minActivationTime: 120
      maxActivationTime: 360
      statusEffects:
        SpawnSpiderEggs: SpawnSpiderEggs

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousSlimeEggs
  suffix: Slimes
  components:
  - type: Sprite
    layers:
    - state: slime
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      minActivationTime: 120
      maxActivationTime: 360
      statusEffects:
        SpawnSlimes: SpawnSlimes

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousEMP
  suffix: EMP
  components:
  - type: Sprite
    layers:
    - state: emp
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      statusEffects:
        SpawnEmp: SpawnEmp

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousGravityWell
  suffix: Gravity
  components:
  - type: Sprite
    layers:
    - state: emp
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      statusEffects:
        SpawnGravityWell: SpawnGravityWell

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousFlash
  suffix: Flash
  components:
  - type: Sprite
    layers:
    - state: emp
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      statusEffects:
        SpawnFlash: SpawnFlash

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousSmoke
  suffix: Smoke
  components:
  - type: Sprite
    layers:
    - state: emp
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      statusEffects:
        SpawnSmoke: SpawnSmoke

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousGas
  suffix: Gases
  components:
  - type: Sprite
    layers:
    - state: viral
  - type: OrganComponents
    onAdd:
    - type: RandomStatusActivation
      statusEffects:
        ExpelGas: ExpelGas

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousSteptriggerImmune
  suffix: Noslip
  components:
  - type: Sprite
    layers:
    - state: viral
  - type: OrganComponents
    onAdd:
    - type: StepTriggerImmune
      whitelist:
        types:
        - Shard
        - Landmine
        - Mousetrap
        - Lava
        - Chasm
        - SlipTile
        - SlipEntity
        - ContrabandDetector
        - Caltrop # Trauma

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousVentcrawler
  suffix: Ventcrawl
  components:
  - type: Sprite
    layers:
    - state: vent
  - type: OrganComponents
    onAdd:
    - type: VentCrawler
      allowInventory: false

- type: entity
  parent: OrganDubiousBase
  id: OrganDubiousRepairable
  suffix: Repairable
  components:
  - type: Sprite
    layers:
    - state: species
  - type: OrganComponents
    onAdd:
    - type: Repairable
      fuelCost: 5
      doAfterDelay: 3
      damage:
        types:
          Blunt: -10
          Piercing: -10
          Slash: -10
